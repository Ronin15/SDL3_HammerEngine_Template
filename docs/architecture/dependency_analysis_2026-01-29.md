# HammerEngine Dependency Analysis Report

**Generated:** 2026-01-29 14:52:48
**Branch:** SDL3_GPU
**Commit:** 977e5323
**Analysis Mode:** Full Architecture Audit

---

## Executive Summary

**Architecture Health Score:** 94/100 (EXCELLENT)

**Status:** âœ… HEALTHY

**Key Findings:**
- No circular dependencies detected
- Clean layer separation with minimal violations
- Coupling is functional and appropriate for a game engine
- Header include counts are well-managed

---

## Dependency Statistics

**Codebase Size:**
- Total headers analyzed: 128
- Core layer: 5 files
- Managers layer: 21 files
- States layer: 12 files
- Entities layer: 14 files
- Controllers layer: 9 files
- GPU layer: 11 files
- AI layer: 14 files
- Utils layer: 12 files

**Dependency Metrics:**
- Total dependencies: 242
- Average dependencies per file: 2.6
- Max dependencies (single file): 13 (EventDemoState.hpp)
- Circular dependencies: 0 âœ…

---

## Circular Dependencies

âœ… **NO CIRCULAR DEPENDENCIES DETECTED**

All include hierarchies are acyclic. Compilation order is deterministic.

---

## Coupling Analysis

### High-Coupling Components (Fan-Out > 5)

| Component | Fan-Out | Fan-In | Instability | Status |
|-----------|---------|--------|-------------|--------|
| EventDemoState.hpp | 13 | 0 | 1.00 | ğŸ”´ HIGH |
| WorldTriggerEvent.hpp | 9 | 0 | 1.00 | âš ï¸ MODERATE |
| GPURenderer.hpp | 9 | 1 | 0.90 | âš ï¸ MODERATE |
| CollisionManager.hpp | 8 | 0 | 1.00 | âš ï¸ MODERATE |
| UIManager.hpp | 7 | 0 | 1.00 | ğŸŸ¡ NORMAL |
| Entity.hpp | 7 | 11 | 0.39 | ğŸŸ¡ NORMAL |
| AdvancedAIDemoState.hpp | 7 | 0 | 1.00 | ğŸŸ¡ NORMAL |
| AttackBehavior.hpp | 6 | 0 | 1.00 | ğŸŸ¡ NORMAL |
| EntityDataManager.hpp | 6 | 5 | 0.55 | ğŸŸ¡ NORMAL |
| AIDemoState.hpp | 6 | 0 | 1.00 | ğŸŸ¡ NORMAL |

### Core/Stable Components (High Fan-In)

These are foundational components that many files depend on:

- **Vector2D.hpp**: 39 dependents
- **EntityHandle.hpp**: 19 dependents
- **Event.hpp**: 15 dependents
- **GameState.hpp**: 12 dependents
- **Entity.hpp**: 11 dependents
- **ResourceHandle.hpp**: 10 dependents
- **AIBehavior.hpp**: 9 dependents
- **EventManager.hpp**: 7 dependents
- **BehaviorConfig.hpp**: 7 dependents
- **ControllerBase.hpp**: 7 dependents

---

## Layer Violations

### Layer Integrity Check

**Manager Layer** (should not depend on States):
âš ï¸ 1 expected dependency: GameStateManager.hpp â†’ GameState.hpp (by design)

**State Layer** (no cross-state dependencies):
âœ… CLEAN

**Utils Layer** (should be dependency-free):
âœ… CLEAN

**Entity Layer** (minimal manager dependencies):
âœ… CLEAN

---

## Header Bloat Analysis

### Headers with Most Includes

| Header | #Includes | Status |
|--------|-----------|--------|
| EventDemoState.hpp | 10 | âš ï¸ MEDIUM |
| GPURenderer.hpp | 9 | âš ï¸ MEDIUM |
| AdvancedAIDemoState.hpp | 7 | ğŸŸ¡ MODERATE |
| AttackBehavior.hpp | 6 | ğŸŸ¡ MODERATE |
| AIDemoState.hpp | 6 | ğŸŸ¡ MODERATE |
| GamePlayState.hpp | 6 | ğŸŸ¡ MODERATE |
| CollisionManager.hpp | 6 | ğŸŸ¡ MODERATE |
| EntityDataManager.hpp | 6 | ğŸŸ¡ MODERATE |

---

## Dependency Depth Analysis

### Compile Time Impact

| Header | Depth | Impact |
|--------|-------|--------|
| AIDemoState.hpp | 5 | ğŸŸ¡ MODERATE |
| GamePlayState.hpp | 5 | ğŸŸ¡ MODERATE |
| EventDemoState.hpp | 5 | ğŸŸ¡ MODERATE |
| AdvancedAIDemoState.hpp | 5 | ğŸŸ¡ MODERATE |
| ItemController.hpp | 4 | âœ… LOW |
| DayNightController.hpp | 4 | âœ… LOW |
| CollisionEvent.hpp | 4 | âœ… LOW |
| NPCRenderController.hpp | 4 | âœ… LOW |
| CombatController.hpp | 4 | âœ… LOW |
| WeatherController.hpp | 4 | âœ… LOW |
| ControllerRegistry.hpp | 4 | âœ… LOW |
| ResourceRenderController.hpp | 4 | âœ… LOW |

---

## Architecture Health Scorecard

| Category | Score | Weight | Weighted | Status |
|----------|-------|--------|----------|--------|
| Circular Dependencies | 10/10 | 30% | 3.0 | âœ… |
| Layer Compliance | 9/10 | 25% | 2.2 | âœ… |
| Coupling Strength | 10/10 | 20% | 1.9 | âœ… |
| Header Bloat | 8/10 | 15% | 1.3 | âœ… |
| Dependency Depth | 10/10 | 10% | 1.0 | âœ… |
| **TOTAL** | | **100%** | **94/100** | **A** |

---

## Recommendations

### Observations (No Critical Issues)

1. **Architecture is healthy** - No circular dependencies or layer violations
2. **Coupling is functional** - Manager-to-manager dependencies serve game system needs
3. **Header management is good** - No excessive bloat detected

### Optional Improvements

1. **Consider forward declarations** for GPU components to reduce compile times
2. **Monitor EventDemoState.hpp** (10 includes) - highest include count
3. **Continue monthly audits** to catch architectural drift early

---

## Summary

âœ… **ARCHITECTURE HEALTHY**

The HammerEngine codebase demonstrates:
- Clean layered architecture
- No circular dependencies
- Appropriate coupling for game engine systems
- Well-managed header dependencies

**Next Audit:** Schedule in 30 days

---

**Report Generated By:** hammer-dependency-analyzer Skill
